<?php

namespace Modules\Domain\App\Repositories;
use Doctrine\ORM\EntityRepository;
use Modules\Domain\App\Entities\GlobalOption;
use Modules\Domain\App\Entities\SubDomain;


/**
 * ThemeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SubDomainRepository extends EntityRepository
{
    public function insertUpdate(GlobalOption $domain,$row)
    {
        $em = $this->_em;
        $exist = $this->findOneBy(['domain' => $domain,'subDomain' => $row]);
        if(empty($exist)){
            $subDomain = $em->getRepository(GlobalOption::class)->find($row);
            $entity = new SubDomain();
            $entity->setDomain($domain);
            $entity->setSubDomain($subDomain);
            $entity->setCreatedAt(new \DateTime());
            $entity->setUpdatedAt(new \DateTime());
            $em->persist($entity);
            $em->flush();
        }
    }

}
